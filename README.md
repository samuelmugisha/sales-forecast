# SuperKart Sales Forecasting

## Business Problem
SuperKart, a retail chain, aims to accurately forecast sales revenue for its outlets for the upcoming quarter to optimize inventory management and inform regional sales strategies. This project focuses on building and deploying a robust forecasting solution integrated into SuperKartâ€™s decision-making systems.

## Data
The dataset contains attributes of various products and stores, including:
- **Product_Id**: Unique identifier for each product.
- **Product_Weight**: Weight of each product.
- **Product_Sugar_Content**: Sugar content (e.g., Low Sugar, Regular, No Sugar).
- **Product_Allocated_Area**: Ratio of allocated display area.
- **Product_Type**: Broad category (e.g., Meat, Snack Foods, Dairy).
- **Product_MRP**: Maximum Retail Price.
- **Store_Id**: Unique identifier for each store.
- **Store_Establishment_Year**: Year of establishment.
- **Store_Size**: Size of the store (High, Medium, Low).
- **Store_Location_City_Type**: City type (Tier 1, Tier 2, Tier 3).
- **Store_Type**: Type of store (e.g., Departmental Store, Supermarket Type 1, Food Mart).
- **Product_Store_Sales_Total**: Total revenue generated by a product in a store (target variable).

## Approach
The project followed a structured approach:
1.  **Data Loading & Overview**: Loaded and inspected the dataset, checking for duplicates and missing values.
2.  **Exploratory Data Analysis (EDA)**: Performed univariate and bivariate analysis to understand data distributions, relationships between features, and revenue generation patterns across different product types, sugar content, and store characteristics.
   -Key observations included the dominance of 'Fruits and Vegetables' and 'Snack Foods' in revenue, and 'OUT004' being the highest-performing store.
4.  **Data Preprocessing**: 
    - Corrected inconsistencies in `Product_Sugar_Content` (replaced 'reg' with 'Regular').
    - Extracted `Product_Id_char` from `Product_Id` to categorize products (FD, NC, DR).
    - Calculated `Store_Age_Years` from `Store_Establishment_Year`.
    - Grouped `Product_Type` into broader `Perishables` and `Non Perishables` categories.
    - Dropped irrelevant columns (`Product_Id`, `Product_Type`, `Store_Id`, `Store_Establishment_Year`).
    - Split the data into training and testing sets (70:30 ratio).
    - Applied `OneHotEncoder` to categorical features using `make_column_transformer` for preprocessing.
5.  **Model Building**: Built and evaluated two ensemble regression models:
    - **RandomForestRegressor**
    - **XGBoostRegressor**
6.  **Hyperparameter Tuning**: Used `GridSearchCV` to tune the hyperparameters for both RandomForest and XGBoost models, optimizing for R-squared score.

## Model Serialization
The final chosen model, the untuned `RandomForestRegressor`, was serialized using `joblib` and saved to `backend_files/final_sales_model.joblib`. This allows for easy loading and deployment of the trained model without retraining.

## End-to-End Deployment using Flask and Streamlit on Hugging Face Docker Spaces
The solution was deployed as a microservice architecture:
1.  **Backend (Flask API)**:
    - A Flask application (`app.py`) was created to serve predictions.
    - It loads the `final_sales_model.joblib` to make predictions based on incoming JSON requests.
    - Packaged into a Docker image using `Dockerfile` and hosted on a **Hugging Face Docker Space** (e.g., `dcsamuel/SuperKart`).
    - A `requirements.txt` file listed all necessary Python dependencies.
2.  **Frontend (Streamlit UI)**:
    - A Streamlit application (`app.py`) provided an interactive user interface.
    - Users input product and store features, and the Streamlit app makes API calls to the deployed Flask backend for predictions.
    - Also packaged into a Docker image using `Dockerfile` and hosted on a separate **Hugging Face Streamlit Space** (e.g., `dcsamuel/SuperKartView`).
    - A `requirements.txt` file specified Streamlit and requests as dependencies.

## Results
Both the untuned and tuned RandomForest and XGBoost models showed very similar and robust performance on the test set:
- **R-squared**: Approximately 0.668, indicating that about 66.8% of the variance in `Product_Store_Sales_Total` can be explained by the models.
- **MAPE**: Around 18.7%, meaning predictions deviated by approximately 18.7% from actual sales on average.

Hyperparameter tuning did not significantly improve performance over the default parameters for these specific models. The untuned RandomForestRegressor was selected as the final model for its comparable performance and simplicity.

## Tools and Technologies
- **Programming Language**: Python
- **Data Manipulation**: Pandas
- **Numerical Operations**: NumPy
- **Data Visualization**: Matplotlib, Seaborn
- **Machine Learning**: Scikit-learn (RandomForestRegressor, OneHotEncoder, GridSearchCV, train_test_split), XGBoost (XGBRegressor)
- **Model Serialization**: joblib
- **Web Framework**: Flask
- **Interactive UI**: Streamlit
- **Containerization**: Docker
- **Deployment Platform**: Hugging Face Spaces

## Key Learnings
- **Revenue Optimization**: 'Fruits and Vegetables' and 'Snack Foods' are primary revenue drivers, and 'Low Sugar'/'Regular' products also contribute significantly. Focus should be on these categories.
- **Store Performance**: Store 'OUT004' (Medium, Supermarket Type2, Tier 2) is the top performer; its strategies could be replicated. 'OUT002' (Small, Food Mart, Tier 3) consistently underperforms, requiring investigation.
- **Strategic Expansion**: Tier 2 cities offer the highest revenue, indicating a strong market fit for future expansions.
- **Dynamic Inventory Management**: The predictive model can inform inventory management, reduce stockouts/overstocking, and optimize procurement.
- **Product Categorization**: `Product_Id_char` provides granular insights for targeted marketing and SKU management.
- **Scalable Deployment**: The decoupled Flask backend and Streamlit frontend on Hugging Face Spaces offer scalability, flexibility, and reusability for integration with other SuperKart systems.
- **Model Enhancement**: Continuous monitoring, retraining, and exploring additional features (e.g., seasonality, promotions) can further improve forecasting accuracy.
```
